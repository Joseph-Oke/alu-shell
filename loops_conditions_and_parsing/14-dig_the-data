#!/usr/bin/env bash
# Script that groups visitors by IP and HTTP status code from Apache log file

awk '{
	# Extract IP (first field) and HTTP status code (9th field)
	ip = $1
	status = $9

	# Create a key combining IP and status code
	key = ip " " status

	# Count occurrences
	count[key]++
}

 END{
	# Print all entries with their counts
	for (entry in count) {

	print count[entry], entry	
	}
}' /var/log/apache2/access.log | sort -nr
