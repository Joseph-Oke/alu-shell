#!/usr/bin/env bash
# Init script manage_my_process (init script)

case "$1" in
    start)
        # Start the process silently, and record its PID.
        ./manage_my_process &>/dev/null &
        echo $! > /var/run/my_process.pid
        ;;
    stop)
        if [ -f /var/run/my_process.pid ]; then
            # Stop the process silently and remove the PID file.
            kill "$(cat /var/run/my_process.pid)" &>/dev/null
            rm -f /var/run/my_process.pid
            # Per requirements, output exactly "Good" when stopped.
            echo "Good"
        fi
        ;;
    restart)
        if [ -f /var/run/my_process.pid ]; then
            kill "$(cat /var/run/my_process.pid)" &>/dev/null
            rm -f /var/run/my_process.pid
        fi
        # Start the process silently, and record its new PID.
        ./manage_my_process &>/dev/null &
        echo $! > /var/run/my_process.pid
        ;;
    *)
        echo "Usage: manage_my_process {start|stop|restart}"
        exit 1
        ;;
esac
